<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>flair.</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body { margin:0; background: linear-gradient(135deg, #0d7377 0%, #14a085 50%, #0d7377 100%); display:flex; align-items:center; justify-content:center; height:100vh; overflow:hidden; }
    .splash-logo { text-align:center; animation: fadeIn 1s ease; }
    .splash-logo h1 { font-family:'Georgia',serif; font-size:3.5rem; color:#fff; font-weight:400; letter-spacing:2px; margin:0; }
    .splash-logo p { color:rgba(255,255,255,0.7); font-size:0.9rem; margin-top:8px; letter-spacing:4px; text-transform:uppercase; font-family:'Helvetica Neue',sans-serif; }
    .splash-loader { margin-top:40px; width:40px; height:40px; border:3px solid rgba(255,255,255,0.3); border-top-color:#fff; border-radius:50%; animation:spin 1s linear infinite; margin-left:auto; margin-right:auto; }
    @keyframes fadeIn { from{opacity:0;transform:translateY(20px)} to{opacity:1;transform:translateY(0)} }
    @keyframes spin { to{transform:rotate(360deg)} }
  </style>
</head>
<body>
  <div class="splash-logo">
    <h1>flair.</h1>
    <p>salon &amp; spa</p>
    <div class="splash-loader"></div>
  </div>
  <script type="module">
    import { auth } from './firebase-config.js';
    import { onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
    import { doc, getDoc } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
    import { db } from './firebase-config.js';

    setTimeout(() => {
      onAuthStateChanged(auth, async (user) => {
        if (user) {
          const userDoc = await getDoc(doc(db, 'users', user.uid));
          if (userDoc.exists()) {
            const role = userDoc.data().role;
            if (role === 'Owner') window.location.href = 'owner-dashboard.html';
            else window.location.href = 'for-you.html';
          } else {
            window.location.href = 'role-select.html';
          }
        } else {
          window.location.href = 'auth.html';
        }
      });
    }, 2000);
  </script>
</body>
</html>
